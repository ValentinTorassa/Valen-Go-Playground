GO â€” Debian + VS Code
==========================================

Requisitos previos
------------------
- Go instalado (via APT o tarball oficial).
- VS Code con la extensiÃ³n â€œGoâ€ (golang.go).
- Git (opcional pero recomendado).

Estructura mÃ­nima recomendada
-----------------------------
Ejecutable simple (un binario):
  myapp/
  â”œâ”€ go.mod
  â”œâ”€ cmd/
  â”‚  â””â”€ myapp/
  â”‚     â””â”€ main.go
  â”œâ”€ internal/              # lÃ³gica de negocio (no exportada a otros mÃ³dulos)
  â”‚  â””â”€ core/
  â”‚     â”œâ”€ service.go
  â”‚     â””â”€ service_test.go
  â””â”€ pkg/                   # librerÃ­as exportables (si las hubiera)
     â””â”€ util/
        â””â”€ strings.go

Componentes principales
-----------------------
1) MÃ“DULO (go.mod)
   - Define el nombre del mÃ³dulo y gestiona dependencias.
   - Se crea con:  go mod init <ruta_del_mÃ³dulo>
   - Ej.: go mod init example.com/myapp  (si vas a publicarlo en GitHub, usa github.com/usuario/repo)

2) PAQUETES (packages)
   - Cada carpeta con .go es un paquete. â€œpackage mainâ€ compila a ejecutable (requiere func main()).
   - Paquetes de librerÃ­a usan â€œpackage <nombre>â€ (sin main).

3) FUNCIONES, STRUCTS e INTERFACES
   - Go organiza la lÃ³gica en funciones y mÃ©todos sobre structs.
   - Interfaces definen comportamientos (contratos) y permiten implementar dependencias intercambiables (testing, mocks).

4) TESTS
   - Archivos terminados en _test.go, con funciones TestXxx(t *testing.T).
   - Se ejecutan con: go test ./...

5) HERRAMIENTAS (formateo, lint, debug)
   - Formato: gofmt -w .  (VS Code puede hacerlo al guardar)
   - Imports: goimports (viene con la extensiÃ³n Go)
   - Linter recomendado: golangci-lint (go install ...@latest)
   - Debugger: Delve (dlv)

Crear un proyecto desde cero
----------------------------
# 1) Crear carpeta y mÃ³dulo
mkdir -p ~/dev/myapp/cmd/myapp && cd ~/dev/myapp
go mod init example.com/myapp

# 2) Crear punto de entrada (main)
cat > cmd/myapp/main.go <<'EOF'
package main

import (
	"fmt"

	"example.com/myapp/internal/core"
)

func main() {
	msg := core.Hello("Valen")
	fmt.Println(msg)
}
EOF

# 3) Crear lÃ³gica interna (paquete de negocio)
mkdir -p internal/core
cat > internal/core/service.go <<'EOF'
package core

import "fmt"

func Hello(name string) string {
	return fmt.Sprintf("Hola, %s ğŸ‘‹ desde Go!", name)
}
EOF

# 4) Tests bÃ¡sicos
cat > internal/core/service_test.go <<'EOF'
package core

import "testing"

func TestHello(t *testing.T) {
	got := Hello("Tester")
	want := "Hola, Tester ğŸ‘‹ desde Go!"
	if got != want {
		t.Fatalf("resultado inesperado: got=%q want=%q", got, want)
	}
}
EOF

Ejecutar, compilar y probar
---------------------------
# Ejecutar â€œen calienteâ€ (compila en memoria y corre)
go run ./cmd/myapp

# Compilar binario
mkdir -p bin
go build -o bin/myapp ./cmd/myapp
./bin/myapp

# Correr tests
go test ./...

# Ver cobertura (opcional)
go test ./... -cover

Manejo de dependencias
----------------------
- Agregar/usar paquetes externos: importarlos en tu .go y luego
  go mod tidy   # sincroniza go.mod y go.sum
- Actualizar:  go get -u ./...  (actualiza a Ãºltimas compatibles)
- Limpieza:    go mod tidy

Formateo, calidad y utilidades
------------------------------
# Formato de cÃ³digo (aplica a todos los .go del proyecto)
gofmt -w .

# Vet (chequeos estÃ¡ticos comunes)
go vet ./...

# Linter (opcional, recomendado)
go install github.com/golangci/golangci-lint/cmd/golangci-lint@latest
~/.local/bin/golangci-lint run   # o $HOME/go/bin/golangci-lint segÃºn tu PATH

DepuraciÃ³n con Delve + VS Code
------------------------------
# Instalar Delve
go install github.com/go-delve/delve/cmd/dlv@latest

# Asegurar PATH
echo 'export PATH="$PATH:$HOME/go/bin"' >> ~/.profile
source ~/.profile

# Archivo .vscode/launch.json mÃ­nimo
mkdir -p .vscode
cat > .vscode/launch.json <<'EOF'
{
  "version": "0.2.0",
  "configurations": [
    {
      "name": "Debug (myapp)",
      "type": "go",
      "request": "launch",
      "mode": "auto",
      "program": "${workspaceFolder}/cmd/myapp"
    }
  ]
}
EOF

# CÃ³mo usar
- AbrÃ­ la carpeta del proyecto en VS Code.
- PonÃ© breakpoints en main.go o en la lÃ³gica interna.
- PresionÃ¡ F5 para iniciar la depuraciÃ³n.

Atajos mentales (resumen)
-------------------------
- go mod init â€¦        -> â€œcrear mÃ³duloâ€
- go run ./cmd/app     -> â€œejecutar appâ€
- go build -o bin/app  -> â€œcompilar binarioâ€
- go test ./...        -> â€œcorrer testsâ€
- gofmt -w .           -> â€œformatearâ€
- go vet ./...         -> â€œchequeos bÃ¡sicosâ€
- dlv + F5 (VS Code)   -> â€œdepurar con breakpointsâ€

Consejos prÃ¡cticos
------------------
- HacÃ© commits pequeÃ±os y frecuentes.
- UsÃ¡ internal/ para encapsular lÃ³gica (evita depender â€œpor accidenteâ€ de tus paquetes).
- EscribÃ­ tests pequeÃ±os y claros; probÃ¡ comportamiento, no implementaciÃ³n.
- CorrÃ© go fmt y go vet antes de commitear (o agregalo a tu CI).
- Para proyectos mÃ¡s grandes, usÃ¡ cmd/<app> para tus ejecutables y separÃ¡ paquetes de dominio (internal/core, internal/infra, etc.).

Fin
---

